<p></p>
<div class="grid">
    <div class="col-12">
        <div class="card">
            <h2>Itinerarios registrados</h2>
            <p-table #dt1 [value]="itinerarios1" dataKey="id" [rows]="10" [loading]="false" [rowHover]="true"
                    styleClass="p-datatable-gridlines" [paginator]="true" [globalFilterFields]="['IDUNIDAD','ORIGEN','DESTINO','TIEMPOESTIMADO','FECHAVIAJE','HORASALIDA', 'PRECIO']"
                    responsiveLayout="scroll">
                <ng-template pTemplate="caption">
					<div class="flex justify-content-between flex-column sm:flex-row">
						<button pButton label="Limpiar" class="p-button-outlined mb-2" icon="pi pi-filter-slash" (click)="clear(dt1)"></button>
						<span class="p-input-icon-left mb-2">
							<i class="pi pi-search"></i>
							<input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Palabra clave" class="w-full"/>
						</span>
					</div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th style="min-width: 4rem; background-color: rgb(74, 110, 254);">
                            <div class="flex justify-content-between align-items-center">
								ID itinerario
							</div>
                        </th>
                        <th style="min-width: 5rem; background-color: rgb(74, 110, 254);">
                            <div class="flex justify-content-between align-items-center">
								ID unidad
							</div>
                        </th>
                        <th style="min-width: 3rem; background-color: rgb(74, 110, 254);">
                            <div class="flex justify-content-between align-items-center">
								Origen
                                <p-columnFilter type="text" field="origen" display="menu" placeholder="Buscar por origen"></p-columnFilter>
							</div>
                        </th>
                        <th style="min-width: 3rem; background-color: rgb(74, 110, 254);">
                            <div class="flex justify-content-between align-items-center">
								destino
                                <p-columnFilter type="text" field="destino" display="menu" placeholder="Buscar por destino"></p-columnFilter>
							</div>
                        </th>
                        <th style="min-width: 3rem; background-color: rgb(74, 110, 254);">
                            <div class="flex justify-content-between align-items-center">
								Tiempo estimado
							</div>
                        </th>
                        <th style="min-width: 6rem; background-color: rgb(74, 110, 254);">
                            <div class="flex justify-content-between align-items-center">
								fecha de viaje
							</div>
                        </th>
                        <th style="min-width: 4rem; background-color: rgb(74, 110, 254);">
                            <div class="flex justify-content-between align-items-center">
								hora de salida
							</div>
                        </th>
                        <th style="min-width: 4rem; background-color: rgb(74, 110, 254);">
                            <div class="flex justify-content-between align-items-center">
								Precio
							</div>
                        </th>
                        <th style="min-width: 4rem; background-color: rgb(74, 110, 254);"></th>
                    </tr>
                    <p-confirmDialog header="Confirmación" key="confirmar" icon="pi pi-exclamation-triangle" message="¿Seguro que desea eliminar?"
                    [style]="{width: '350px'}" acceptButtonStyleClass="p-button-text" rejectButtonStyleClass="p-button-text"></p-confirmDialog>
                </ng-template>
                <ng-template pTemplate="body" let-itinerario>
                    <tr>
                        <td>
                            {{itinerario.IDITINERARIO}}
                        </td>
                        <td>
                            {{itinerario.IDUNIDAD}}
                        </td>
                        <td>
                            {{itinerario.ORIGEN}}
                        </td>
                        <td>
                            {{itinerario.DESTINO}}
                        </td>
                        <td>
                            {{itinerario.TIEMPOESTIMADO}}
                        </td>
                        <td>
                            {{itinerario.FECHAVIAJE|date: 'dd/MM/yyyy'}}
                        </td>
                        <td>
                            {{itinerario.HORASALIDA}}
                        </td>
                        <td>
                            {{itinerario.PRECIO}}
                        </td>
                        <td>
                            <button type="button" pButton pRipple icon="pi pi-pencil" style="align-items:center" (click)="op1.toggle($event)" ></button> 
                            <p-overlayPanel #op1 [showCloseIcon]="true" [style]="{width: '1100px'}">
                                <app-actualizar-itinerario
                                [iditinerario]="itinerario.IDITINERARIO" 
                                [idunidad]="itinerario.IDUNIDAD" 
                                [origen]="itinerario.ORIGEN"
                                [destino]="itinerario.DESTINO"
                                [tiempoestimado]="itinerario.TIEMPOESTIMADO"
                                [fechaviaje]="itinerario.FECHAVIAJE"
                                [horasalida]="itinerario.HORASALIDA"
                                [precio]="itinerario.PRECIO"></app-actualizar-itinerario>
                            </p-overlayPanel>
                            <button type="button" pButton pRipple icon="pi pi-trash" class="p-element p-ripple p-button-raised p-button-danger p-button p-component" (click)="deSubmit(itinerario.IDITINERARIO)"></button>                        
                        </td>
                    </tr>
                </ng-template>

                <ng-template pTemplate="loadingbody">
					<tr>
						<td colspan="8">Cargando los datos de los itinerarios...</td>
					</tr>
				</ng-template>
            </p-table>
            <hr>
        </div>
    </div>
</div>